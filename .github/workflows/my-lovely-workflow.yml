name: Backup Project 
on:
  push:
    branches: "main"

jobs:
  Backup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout to Main
        uses: actions/checkout@v4
        with:
          ref:  282180fe7e5d9cbf297f2f0ef813cffe60ce2328

      - name: Clone main to DD-MM-YYYY-test branch
        run: |
           branch_name=$(date +'%d-%m-%Y')-test
           if ! [ git ls-remote --head | grep -i $(branch_name) ] ; then
             # git checkout -b $branch_name
             git checkout -b CI
             # git push --set-upstream origin $branch_name
             git push --set-upstream origin CI
             echo "La branche est creer" 
           fi
           echo "OK"
